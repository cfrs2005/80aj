---
title: 101029 php 产品安装程序制作代码demo
layout: post
permalink: /1569.html
categories:
  - Code
tags:
  - PHP
  - 产品安装程序制作代码
  - 制作demo
---
[<img class="aligncenter size-full wp-image-1427" title="php" alt="" src="http://www.80aj.com/wp-content/uploads/2010/08/php.jpg" width="500" height="317" />][1]

php制作安装程序 简单demo

1:检查文件写入权限

2:配置文件的一些信息

3:最终执行sql导入

<pre class="brush: php; title: ; notranslate" title="">&lt;?php
$file = "dbinfo.php";
$step = $_REQUEST ['step'];
if (! step) {
	$step = 0;
}
if ($step == 0) {
	if (! is_writable ( $file )) {
		echo "&lt;font color=red&gt;不可写！！！&lt;/font&gt;";
	} else {
		echo "&lt;font color=green&gt;可写,&lt;a href='1.php?step=1'&gt;下一步&lt;/a&gt;&lt;/font&gt;";
	}
}
if ($_POST ['submit']) {
	$content = "&lt;?php";
	$content .= "\n";
	$content .= "\$user=" . "'" . $_POST ['dbusername'] . "';//数据库用户名";
	$content .= "\n";
	$content .= "\$password=" . "'" . $_POST ['password'] . "';//数据库用户密码";
	$content .= "\n";
	$content .= "\$host=" . "'" . $_POST ['host'] . "';//数据库服务器地址";
	$content .= "\n";
	$content .= "\$dbname=" . "'" . $_POST ['dbname'] . "';//数据库名";
	$content .= "\n";
	$content .= "\$port=" . "'5432';//数据库端口";
	$content .= "\n";
	$content .= "?&gt;";
	$fcontent = fopen ( $file, 'w+' );
	fwrite ( $fcontent, $content );
	$step = 2;
}
if ($step == 1) {
	?&gt;
&lt;form method="post"&gt;
	数据库用户名:
	&lt;input type="text" name="dbusername"&gt;
	数据库密码:
	&lt;input type="text" name="password"&gt;
	数据库名:
	&lt;input type="text" name="host"&gt;
	数据库地址:
	&lt;input type="text" name="dbname"&gt;
	&lt;input type="submit" name="submit"&gt;
&lt;/form&gt;
&lt;?php
}
if ($step == 2) {
	echo "执行sql导入成功";
}
?&gt;
&lt;?php

$file = "dbinfo.php";
$step = $_REQUEST ['step'];
if (! step) {
	$step = 0;
}
if ($step == 0) {
	if (! is_writable ( $file )) {
		echo "&lt;font color=red&gt;不可写！！！&lt;/font&gt;";
	} else {
		echo "&lt;font color=green&gt;可写,&lt;a href='1.php?step=1'&gt;下一步&lt;/a&gt;&lt;/font&gt;";
	}
}

if ($_POST ['submit']) {
	$content = "&lt;?php";
	$content .= "\n";
	$content .= "\$user=" . "'" . $_POST ['dbusername'] . "';//数据库用户名";
	$content .= "\n";
	$content .= "\$password=" . "'" . $_POST ['password'] . "';//数据库用户密码";
	$content .= "\n";
	$content .= "\$host=" . "'" . $_POST ['host'] . "';//数据库服务器地址";
	$content .= "\n";
	$content .= "\$dbname=" . "'" . $_POST ['dbname'] . "';//数据库名";
	$content .= "\n";
	$content .= "\$port=" . "'5432';//数据库端口";
	$content .= "\n";
	$content .= "?&gt;";
	$fcontent = fopen ( $file, 'w+' );
	fwrite ( $fcontent, $content );
	$step = 2;
}
if ($step == 1) {
	?&gt;

&lt;form method="post"&gt;
	数据库用户名:
	&lt;input type="text" name="dbusername"&gt;
	数据库密码:
	&lt;input type="text" name="password"&gt;
	数据库名:
	&lt;input type="text" name="host"&gt;
	数据库地址:
	&lt;input type="text" name="dbname"&gt;
	&lt;input type="submit" name="submit"&gt;
&lt;/form&gt;&lt;?php
}
if ($step == 2) {
	echo "执行sql导入成功";
}
</pre>

 [1]: http://www.80aj.com/wp-content/uploads/2010/08/php.jpg