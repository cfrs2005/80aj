---
title: 101030 文件抓取 snoopy类介绍
layout: post
permalink: /1571.html
categories:
  - Code
tags:
  - 'failed to open stream : HTTP request failed!'
  - PHP
  - snoopy
---
 最近机房服务器不稳定 刷新缓存的时候 总是 时有时无，  failed to open stream : HTTP request failed!   &#8230;本地打开怎么都没问题 就是服务器那边跑 不行 谷歌后 修改了 apache php 的 配置 还是不行，想起了以前做 内容抓取的利器  snoopy down下来后 随便跑了下 问题就解决了，这里介绍下 snoopy的用法。 snoopy 下载地址： http://sourceforge.net/projects/snoopy/files/Snoopy/Snoopy-1.2.4/Snoopy-1.2.4.zip/download snoopy 用法: snoopy是一个php类，用来模仿web浏览器的功能，它能完成获取网页内容和发送表单的任务。 下面是它的一些特征： 1、方便抓取网页的内容 2、方便抓取网页的文字（去掉HTML代码） 3、方便抓取网页的链接 4、支持代理主机 5、支持基本的用户/密码认证模式 6、支持自定义用户agent,referer,cookies和header内容 7、支持浏览器转向，并能控制转向深度 8、能把网页中的链接扩展成高质量的url（默认） 9、方便提交数据并且获取返回值 10、支持跟踪HTML框架（v0.92增加） 11、支持再转向的时候传递cookies 抓取博客内容: <? include &#8221;Snoopy.class.php&#8221;; $snoopy = new Snoopy; $snoopy->fetch(&#8220;http://xxxx&#8221;); echo $snoopy->results; ?> 比如说我们抓取我的blog的文字 <? include &#8221;Snoopy.class.php&#8221;; $snoopy = new Snoopy; $snoopy->fetchtext(&#8220;http://xxx&#8221;); echo $snoopy->results; ?> 抓取链接 <? include &#8221;Snoopy.class.php&#8221;; $snoopy = new Snoopy; $snoopy->fetchlinks(&#8220;http://www.lpfrx.com&#8221;); print_r($snoopy->results); ?>